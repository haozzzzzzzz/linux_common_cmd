# 变量

声明变量的一般形式是使用var关键字：

```go
var identifier type
```



## 变量声明

第一种，指定变量类型，声明后若不赋值，使用默认值。

```go
var v_name v_type
v_name = value
```



第二种，指定值自行判断变量类型

```go
var v_name = value
```



第三种，省略var，注意`:=`左侧的变量不应该是已经声明过的，否则会导致编译错误。

```go
v_name := value

// 例如
var a int = 10
var b = 10
c := 10
```



var语句可以定在包或函数列表。

```go
package main

import "fmt"

var c, python, java bool

func main() {
    var i int
  	fmt.Println(i, c, python, java)
}
```



## 多变量声明

```go
var vname1, vname2, vname3 type
vname1, vname2, vname3 = v1, v2, v3
vname1, vname2, vname3 := v1, v2, v3

// 这种因式分解关键字的写法一般用于声明全局变量
var (
  vname1 v_type1
  vname2 v_type2
)
```



## 简短形式，使用:=赋值操作符

在变量的初始化时省略变量的类型而由系统自动推断，声明语句协商`var`关键字其实是显得有些多余了，因此我们可以将它们简写为`a := 50`或者`b := false`，a和b的类型（int和bool）将由编译器自动推断。

**这是使用变量的首选形式，但是它只能被用在函数体内，而不可以用于全局变量的生命和赋值**。使用操作符`:=`可以高效地创建一个新的变量，称之为**初始化声明**。

函数外的每个语句都必须以关键字开始（var、func、等等），`:=`结构不能使用在函数外。



注意事项

- 相同的代码块内，使用`:=`对相同名称的变量使用多次初始化声明，例如`a := 20`就是不被允许的，编译器会提示错误。
- 变量先声明后使用，在声明之前使用会报错。
- 如果你声明了一个局部变量却没有在相同的代码块中使用它，会得到编译错误。但是全局变量是允许声明但不适用。
- 空白标识符`_`也被用于抛弃值，例如值5在`_, b = 5, 7`中被抛弃。`_`实际上是一个只写变量，你不能得到它的值。这样做事因为Go语言中你必须使用所有被声明的变量，但你有时不需要使用从一个函数得到的所有返回值。
- 并行赋值也被用于当一个函数返回多个返回值时，比如这里的val和错误err是通过调用Func2函数同时得到：`val, err = Func1(var1)`






### 重新声明与再次赋值

满足下列条件时，已被声明的变量v可出现在`:=`声明中：

- 本次声明与已声明的v处于同一作用域中（若v已在外层作用域中声明过，则此次声明会创建一个新的变量）。
- 在初始化中与其类型相应的值才能赋予v，且在此次生命中至少另一个变量是新声明的。

```go
package main

import "fmt"

func echo() (int, int) {
	return 2, 3
}

func main() {
	v := 1
	a, v := echo()
	fmt.Println(v)
	fmt.Println(a)
}
```

```go
3
2
```

